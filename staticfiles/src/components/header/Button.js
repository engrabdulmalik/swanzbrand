import{a as s,v as T,d as _,e as O,j as e,B as P,y as l,K as k,T as F,I as $,N as Y,M as m,s as n,O as N,Q as W,U as z,V as D,J as b}from"../../../vendor.js";import{l as J}from"../../redux/actions/userActions.js";const V=()=>{const[y,i]=s.useState(!1),[d,u]=s.useState(null),[h,x]=s.useState(null),[w,K]=s.useState(0),a=s.useRef(null),t=T(),S=_(),v=O(o=>o.userLogin),{userInfo:C}=v,B=()=>{i(o=>!o)},I=o=>{u(o.currentTarget)},c=o=>{x(o.currentTarget)},r=()=>{u(null)},R=()=>{x(null)},f=o=>{a.current&&!a.current.contains(o.target)&&i(!1)},A=()=>{t("/login"),r()},E=()=>{t("/register"),r()},L=()=>{t("/myaccount"),r()},M=()=>{b.fire({title:"Are you sure?",text:"You will be logged out of your account.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, log me out",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&(S(J()),r(),b.fire("Logged Out","You have been logged out successfully.","success"))})},g=()=>{t("/compare"),c()},p=()=>{t("/wishlist"),c()},j=()=>{t("/cart"),c()};return s.useEffect(()=>(document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}),[]),e.jsxs(P,{sx:{display:"flex",gap:2,justifyContent:"center",my:2,position:"relative"},children:[e.jsx(l,{onClick:B,sx:{backgroundColor:"#f5f5f5",color:"#000","&:hover":{backgroundColor:"#e0e0e0"},borderRadius:"50%",width:"56px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:1},children:e.jsx(k,{})}),y&&e.jsx(F,{variant:"outlined",placeholder:"Search...",sx:{position:"absolute",top:"70px",left:"0",width:"300px",borderRadius:"8px",backgroundColor:"#fff",boxShadow:2,transition:"all 0.3s ease",zIndex:1},autoFocus:!0,ref:a,InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx(k,{sx:{color:"gray"}})})}}),e.jsx(l,{onClick:I,sx:{backgroundColor:"#f5f5f5",color:"#000","&:hover":{backgroundColor:"#e0e0e0"},borderRadius:"50%",width:"56px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:1},children:e.jsx(Y,{})}),e.jsx(m,{anchorEl:d,open:!!d,onClose:r,sx:{mt:2},children:C?e.jsxs(e.Fragment,{children:[e.jsx(n,{onClick:L,children:C.first_name}),e.jsx(n,{onClick:M,children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{onClick:A,children:"Login"}),e.jsx(n,{onClick:E,children:"Register"})]})}),e.jsx(l,{onClick:g,sx:{backgroundColor:"#f5f5f5",color:"#000","&:hover":{backgroundColor:"#e0e0e0"},borderRadius:"50%",width:"56px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:1},children:e.jsx(N,{})}),e.jsx(l,{onClick:p,sx:{backgroundColor:"#f5f5f5",color:"#000","&:hover":{backgroundColor:"#e0e0e0"},borderRadius:"50%",width:"56px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:1},children:e.jsx(W,{})}),e.jsx(l,{onClick:j,sx:{backgroundColor:"#f5f5f5",color:"#000","&:hover":{backgroundColor:"#e0e0e0"},borderRadius:"50%",width:"56px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:1},children:e.jsx(z,{badgeContent:w,color:"secondary",children:e.jsx(D,{})})}),e.jsxs(m,{anchorEl:h,open:!!h,onClose:R,sx:{mt:2},children:[e.jsx(n,{onClick:g,children:"Compare"}),e.jsx(n,{onClick:p,children:"Wishlist"}),e.jsx(n,{onClick:j,children:"Cart"})]})]})};export{V as S};
