import{c,u as h,e as p,a as u,j as e,l as y,B as x,f as l,_ as j,ac as f,ad as v,ae as o,af as r,o as b}from"../../vendor.js";import{u as g,c as M,e as C,S}from"../../async-vendor.js";import{F as P}from"../components/FormContainer.js";import{C as B}from"../components/CheckoutSteps.js";import{b as F}from"../redux/actions/cartActions.js";import"../../__commonjsHelpers__.js";import"../redux/constants/cartConstants.js";const W=()=>{const i=c(),a=h(),m=p(s=>s.cart),{shippingAddress:d,paymentMethod:k,cartItems:n}=m;d.address||a("/shippingAddress");const t=g({initialValues:{paymentMethod:"paypal"},validationSchema:M({paymentMethod:C().required("Please select a payment method")}),onSubmit:s=>{i(F(s.paymentMethod)),a("/review")}});return u.useEffect(()=>{n.length===0&&(S.fire({icon:"error",title:"Your cart is empty",text:"Please add items to your cart before proceeding to checkout."}),a("/"))},[n,a]),e.jsxs(P,{children:[e.jsx(B,{activeStep:2}),e.jsx(y,{maxWidth:"sm",children:e.jsxs(x,{sx:{mt:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"Payment Method"}),e.jsxs("form",{onSubmit:t.handleSubmit,children:[e.jsxs(j,{component:"fieldset",error:t.touched.paymentMethod&&!!t.errors.paymentMethod,children:[e.jsx(f,{component:"legend",children:"Select Payment Method"}),e.jsxs(v,{"aria-label":"payment method",name:"paymentMethod",value:t.values.paymentMethod,onChange:t.handleChange,onBlur:t.handleBlur,children:[e.jsx(o,{value:"paypal",control:e.jsx(r,{}),label:"PayPal"}),e.jsx(o,{value:"creditCard",control:e.jsx(r,{}),label:"Credit Card"}),e.jsx(o,{value:"cashOnDelivery",control:e.jsx(r,{}),label:"Cash on Delivery"}),e.jsx(o,{value:"googlePay",control:e.jsx(r,{}),label:"Google Pay"})]}),t.touched.paymentMethod&&t.errors.paymentMethod&&e.jsx(l,{variant:"body2",color:"error",sx:{mt:1},children:t.errors.paymentMethod})]}),e.jsx(b,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{mt:2},children:"Choose"})]})]})})]})};export{W as default};
