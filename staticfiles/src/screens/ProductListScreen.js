import{c as E,u as L,e as o,a as S,j as e,B,f as h,o as I,C as v,a2 as R,P as k,a3 as A,a4 as H,a5 as x,a6 as s,a7 as N,I as j}from"../../vendor.js";import{n as $,g as F,S as G}from"../../async-vendor.js";import{F as O}from"../components/FormContainer.js";import{l as m,b as U,d as q,c as z}from"../redux/actions/productActions.js";import{w as J}from"../redux/constants/productConstants.js";import"../../__commonjsHelpers__.js";const re=()=>{const t=E(),a=L(),p=o(r=>r.productList),{loading:g,error:n,products:C}=p,f=o(r=>r.userLogin),{userInfo:i}=f,y=o(r=>r.productCreate),{loading:K,error:M,success:d,product:l}=y,P=o(r=>r.categoryList),{loading:u,error:Q,categories:c}=P,b=o(r=>r.productDelete),{success:T}=b;S.useEffect(()=>{t({type:J}),i.isAdmin||a("/login"),d?a(`/admin/product/${l._id}/edit`):(t(m()),t(U()))},[t,a,i,T,d,l]);const _=r=>{a(`/admin/product/${r}/edit`)},D=r=>{window.confirm("Are you sure you want to delete this product?")&&(t(q(r)),G.fire({title:"Great job!",text:"Product Deleted Successfully",icon:"success"}).then(()=>{t(m())}))},w=()=>{if(c.length>0){const r={name:"",price:0,brand:"",countInStock:0,category:c[0].name,description:""};t(z(r))}else console.error("No categories available")};return e.jsxs(O,{children:[e.jsxs(B,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(h,{variant:"h4",component:"h1",children:"Products"}),e.jsx(I,{variant:"contained",color:"primary",onClick:w,disabled:u||!c.length,children:u?"Loading...":"Create Product"})]}),g?e.jsx(v,{}):n?e.jsx(h,{color:"error",children:n}):e.jsx(R,{component:k,children:e.jsxs(A,{children:[e.jsx(H,{children:e.jsxs(x,{children:[e.jsx(s,{children:"ID"}),e.jsx(s,{children:"Name"}),e.jsx(s,{children:"Price"}),e.jsx(s,{children:"Category"}),e.jsx(s,{children:"Brand"}),e.jsx(s,{children:"Edit"}),e.jsx(s,{children:"Delete"})]})}),e.jsx(N,{children:C.map(r=>e.jsxs(x,{children:[e.jsx(s,{children:r._id}),e.jsx(s,{children:r.name}),e.jsx(s,{children:r.price}),e.jsx(s,{children:r.category_name}),e.jsx(s,{children:r.brand}),e.jsx(s,{children:e.jsx(j,{onClick:()=>_(r._id),children:e.jsx($,{color:"primary"})})}),e.jsx(s,{children:e.jsx(j,{onClick:()=>D(r._id),children:e.jsx(F,{color:"error"})})})]},r._id))})]})})]})};export{re as default};
