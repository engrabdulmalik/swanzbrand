import{u,c,e as h,a as m,j as r,l as p,B as y,f as C,T as a,o as x}from"../../vendor.js";import{S as g,u as f,c as B,e as o}from"../../async-vendor.js";import{F as v}from"../components/FormContainer.js";import{C as b}from"../components/CheckoutSteps.js";import{s as j}from"../redux/actions/cartActions.js";import"../../__commonjsHelpers__.js";import"../redux/constants/cartConstants.js";const P=()=>{const s=u(),d=c(),l=h(n=>n.cart),{shippingAddress:t,cartItems:i}=l;m.useEffect(()=>{i.length===0&&(g.fire({icon:"error",title:"Your cart is empty",text:"Please add items to your cart before proceeding to checkout."}),s("/"))},[i,s]);const e=f({initialValues:{address:t.address||"",city:t.city||"",postalCode:t.postalCode||"",country:t.country||""},validationSchema:B({address:o().required("Address is required").min(5,"Address must be at least 5 characters long"),city:o().required("City is required").min(2,"City must be at least 2 characters long"),postalCode:o().required("Postal Code is required").matches(/^[0-9]{5}$/,"Postal Code must be exactly 5 digits"),country:o().required("Country is required").min(2,"Country must be at least 2 characters long")}),onSubmit:n=>{d(j(n)),s("/payment")}});return r.jsxs(v,{children:[r.jsx(b,{activeStep:1}),r.jsx(p,{maxWidth:"sm",children:r.jsxs(y,{sx:{mt:4},children:[r.jsx(C,{variant:"h4",component:"h1",gutterBottom:!0,children:"Shipping Form"}),r.jsxs("form",{onSubmit:e.handleSubmit,children:[r.jsx(a,{fullWidth:!0,id:"address",name:"address",label:"Address",value:e.values.address,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.address&&!!e.errors.address,helperText:e.touched.address&&e.errors.address,margin:"normal"}),r.jsx(a,{fullWidth:!0,id:"city",name:"city",label:"City",value:e.values.city,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.city&&!!e.errors.city,helperText:e.touched.city&&e.errors.city,margin:"normal"}),r.jsx(a,{fullWidth:!0,id:"postalCode",name:"postalCode",label:"Postal Code",value:e.values.postalCode,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.postalCode&&!!e.errors.postalCode,helperText:e.touched.postalCode&&e.errors.postalCode,margin:"normal"}),r.jsx(a,{fullWidth:!0,id:"country",name:"country",label:"Country",value:e.values.country,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.country&&!!e.errors.country,helperText:e.touched.country&&e.errors.country,margin:"normal"}),r.jsx(x,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{mt:2},children:"Continue"})]})]})})]})};export{P as default};
