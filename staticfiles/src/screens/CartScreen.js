import{d as C,Y as k,a as u,c as q,e as F,j as t,f as o,A as m,Z as b,n as i,L as l,B as n,_ as I,$,a0 as B,F as Q,I as W,o as T}from"../../vendor.js";import{a as y,r as A}from"../redux/actions/cartActions.js";import{g as w}from"../../async-vendor.js";import"../../__commonjsHelpers__.js";import"../redux/constants/cartConstants.js";const R=()=>{const{id:c}=C(),d=k(),j=d.search?Number(d.search.split("=")[1]):1,[x,g]=u.useState(j),a=q(),f=F(r=>r.cart),{cartItems:s,error:h}=f;u.useEffect(()=>{c&&a(y(c,x))},[a,c,x]);const v=(r,e)=>{const p=Number(r.target.value);g(p),a(y(e,p))},S=r=>{a(A(r))};return t.jsxs(t.Fragment,{children:[t.jsx(o,{variant:"h4",gutterBottom:!0,align:"center",mt:4,mb:2,sx:{fontWeight:"bold",color:"black"},children:"Shopping Cart"}),h&&t.jsxs(m,{severity:"error",sx:{mb:2},children:[t.jsx(b,{children:"Error"}),h]}),t.jsxs(i,{container:!0,spacing:3,mt:5,p:3,children:[t.jsx(i,{item:!0,xs:12,md:8,children:s.length===0?t.jsxs(m,{severity:"error",sx:{fontSize:"1.2rem"},children:[t.jsx(b,{sx:{fontSize:"1.5rem"},children:"Alert"}),"Your cart is empty - ",t.jsx(l,{to:"/",children:"Go Shopping"})]}):s.map(r=>t.jsxs(n,{display:"flex",alignItems:"center",sx:{mb:2,borderBottom:"1px solid #ccc",paddingBottom:2,paddingTop:2},children:[t.jsx(n,{component:"img",src:r.image,alt:r.name,sx:{width:"100px",height:"auto",objectFit:"contain",mr:2}}),t.jsxs(n,{sx:{flex:1},children:[t.jsx(o,{component:l,to:`/product/${r.product}`,variant:"subtitle1",sx:{fontWeight:"bold",textDecoration:"none",color:"#333"},children:r.name}),t.jsxs(o,{variant:"body2",sx:{color:"#666"},children:["Price: $",r.price]}),t.jsxs(o,{variant:"body2",sx:{color:"#666"},children:["Quantity: ",r.qty]})]}),t.jsxs(o,{variant:"body2",sx:{fontWeight:"bold",ml:2},children:["Total: $",(r.qty*r.price).toFixed(2)]}),t.jsxs(I,{sx:{m:1,minWidth:100},children:[t.jsx($,{id:`qty-label-${r.product}`,sx:{fontSize:"1rem",fontWeight:"bold"},children:"Qty"}),t.jsx(B,{labelId:`qty-label-${r.product}`,id:`qty-${r.product}`,value:r.qty,label:"Qty",onChange:e=>v(e,r.product),sx:{minWidth:80},children:[...Array(r.countInStock+r.qty).keys()].map(e=>t.jsx(Q,{value:e+1,children:e+1},e+1))})]}),t.jsx(W,{"aria-label":"delete",onClick:()=>S(r.product),sx:{color:"red"},children:t.jsx(w,{})})]},r.product))}),t.jsx(i,{item:!0,xs:12,md:4,children:t.jsxs(n,{sx:{backgroundColor:"#f0f0f0",padding:"20px",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},children:[t.jsxs(o,{variant:"h6",sx:{fontWeight:"bold",mb:2,color:"black"},children:["Subtotal (",s.reduce((r,e)=>r+e.qty,0),") items"]}),t.jsxs(o,{variant:"body1",sx:{mb:1,color:"black"},children:["Total Price: $",s.reduce((r,e)=>r+e.qty*e.price,0).toFixed(2)]}),t.jsxs(l,{to:"/checkout",style:{textDecoration:"none"},children:[" ",t.jsx(T,{variant:"contained",color:"primary",disabled:s.length===0,style:{padding:"10px 20px",width:"100%"},children:"Proceed to Checkout"})]})]})})]})]})};export{R as default};
