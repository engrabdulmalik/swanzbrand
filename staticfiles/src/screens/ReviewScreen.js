import{e as y,c as B,u as A,a as s,j as e,l as L,n as l,P as n,f as t,a8 as S,a9 as d,aa as k,D,ab as x,o as _}from"../../vendor.js";import{S as g}from"../../async-vendor.js";import{F as q}from"../components/FormContainer.js";import{C as w}from"../components/CheckoutSteps.js";import{c as M}from"../redux/actions/orderActions.js";import{p as G}from"../redux/constants/orderContants.js";import"../../__commonjsHelpers__.js";import"../redux/constants/cartConstants.js";const Y=()=>{const P=y(r=>r.orderCreate),{order:v,success:T,error:m}=P,p=B(),E=y(r=>r.cart),{shippingAddress:a,paymentMethod:u,cartItems:i}=E,b=A(),[h,C]=s.useState(0),[c,H]=s.useState(10),[I,$]=s.useState(0),[j,F]=s.useState(0);s.useEffect(()=>{const r=i.reduce((R,f)=>R+f.price*f.qty,0);C(r);const o=Number(.082*r).toFixed(2);$(o);const N=Number(r)+Number(c)+Number(o);F(N)},[i,c]),s.useEffect(()=>{T?(b(`/order/${v._id}`),g.fire({icon:"success",title:"Order Placed Successfully",text:"Thank you for your order!"}),p({type:G})):m&&g.fire({icon:"error",title:"Error",text:m})});const O=()=>{p(M({orderItems:i,shippingAddress:a,paymentMethod:u,itemsPrice:h,shippingPrice:c,taxPrice:I,totalPrice:j}))};return e.jsxs(q,{children:[e.jsx(w,{activeStep:3}),e.jsx(L,{children:e.jsxs(l,{container:!0,spacing:4,mt:2,children:[e.jsxs(l,{item:!0,xs:12,md:8,children:[e.jsxs(n,{sx:{p:2,mb:2},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Shipping Information"}),e.jsxs(t,{children:[a.address,", ",a.city,","," ",a.postalCode,", ",a.country]})]}),e.jsxs(n,{sx:{p:2,mb:2},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Payment Method"}),e.jsx(t,{children:u})]}),e.jsxs(n,{sx:{p:2,mb:2},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Order Items"}),e.jsx(S,{children:i.map((r,o)=>e.jsxs(d,{children:[e.jsx(k,{children:e.jsx(D,{alt:r.name,src:r.image})}),e.jsx(x,{primary:`${r.name} (x${r.qty})`,secondary:`$${Number(r.price).toFixed(2)}`})]},o))})]})]}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(n,{sx:{p:2},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Order Summary"}),e.jsxs(S,{children:[e.jsxs(d,{children:[e.jsx(x,{primary:"Items"}),e.jsxs(t,{children:["$",h.toFixed(2)]})]}),e.jsxs(d,{children:[e.jsx(x,{primary:"Shipping"}),e.jsxs(t,{children:["$",c.toFixed(2)]})]}),e.jsxs(d,{children:[e.jsx(x,{primary:"Total"}),e.jsxs(t,{children:["$",j.toFixed(2)]})]})]}),e.jsx(_,{variant:"contained",color:"primary",fullWidth:!0,onClick:O,sx:{mt:2},children:"Place Order"})]})})]})})]})};export{Y as default};
