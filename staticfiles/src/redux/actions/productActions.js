import{P as E,a as y,b as i,c as T,d as C,e as _,f as R,g as l,h as u,C as S,i as U,j as g,k as P,l as A,m as D,n as O,o as L,p as I,q as m,r as f,s as w,t as $,u as F,v as Q}from"../constants/productConstants.js";import{g as n}from"../../../vendor.js";const z=(t="")=>async a=>{try{a({type:E});const{data:e}=await n.get(`/api/products/?keyword=${t}`);a({type:y,payload:e})}catch(e){a({type:i,payload:e.response&&e.response.data.message?e.response.data.message:e.message})}},B=t=>async a=>{try{a({type:T});const{data:e}=await n.get(`/api/products/${t}`);a({type:C,payload:e})}catch(e){a({type:_,payload:e.response&&e.response.data.detail?e.response.data.detail:e.message})}},j=t=>async a=>{try{a({type:R});const{data:e}=await n.get(`/api/categories/${t}/products/`);a({type:l,payload:e})}catch(e){a({type:u,payload:e.response&&e.response.data.detail?e.response.data.detail:e.message})}},h=t=>async(a,e)=>{try{a({type:P});const{userLogin:{userInfo:s}}=e(),o={headers:{Authorization:`Bearer ${s.access}`}};await n.delete(`/api/products/delete/${t}`,o),a({type:A})}catch(s){a({type:D,payload:s.response&&s.response.data.detail?s.response.data.detail:s.message})}},v=t=>async(a,e)=>{try{a({type:O});const{userLogin:{userInfo:s}}=e(),o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access}`}},{data:r}=await n.post("/api/products/create/",t,o);a({type:L,payload:r})}catch(s){a({type:I,payload:s.response&&s.response.data.detail?s.response.data.detail:s.message})}},V=(t,a,e)=>async(s,o)=>{try{s({type:m});const{userLogin:{userInfo:r}}=o(),p={headers:{"Content-type":"application/json",Authorization:`Bearer ${r.access}`}},c={headers:{"Content-type":"multipart/form-data",Authorization:`Bearer ${r.access}`}},{data:d}=await n.put(`/api/products/update/${t}`,a,p);e&&await n.post(`/api/products/upload-image/${t}`,e,c),s({type:f,payload:d})}catch(r){s({type:w,payload:r.response&&r.response.data.detail?r.response.data.detail:r.message})}},W=()=>async t=>{try{t({type:S});const{data:a}=await n.get("/api/categories/");t({type:U,payload:a})}catch(a){t({type:g,payload:a.response&&a.response.data.message?a.response.data.message:a.message})}},b=(t,a)=>async(e,s)=>{try{e({type:$});const{userLogin:{userInfo:o}}=s(),r={headers:{"Content-Type":"application/json",Authorization:`Bearer ${o.access}`}};return await n.post(`/api/products/${t}/reviews/`,a,r),e({type:F}),{success:!0}}catch(o){return e({type:Q,payload:o.response&&o.response.data.detail?o.response.data.detail:o.message}),{success:!1,error:o.response&&o.response.data.detail?o.response.data.detail:o.message}}};export{B as a,W as b,v as c,h as d,b as e,j as f,z as l,V as u};
