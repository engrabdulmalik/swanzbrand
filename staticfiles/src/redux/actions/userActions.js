import{U as i,a as S,b as _,c,d as y,e as l,f as d,g as R,h as U,i as T,j as I,k as A,l as g,m as C,n as u,P as m,o as L,p as f,q as O,r as D,s as w,t as F,u as P,v as N,w as G,x as Q,y as j,z as $,A as h,B as z,G as B,C as W,D as v,E as H,F as J,H as M}from"../constants/userConstants.js";import{o as b}from"../constants/orderContants.js";import{g as r}from"../../../vendor.js";const q=(t,s)=>async e=>{try{e({type:i});const a={headers:{"Content-type":"application/json"}},{data:n}=await r.post("/api/users/login/",{email:t,password:s},a);e({type:S,payload:n}),localStorage.setItem("userInfo",JSON.stringify(n))}catch(a){e({type:_,payload:a.response&&a.response.data.detail?a.response.data.detail:a.message})}},Y=()=>t=>{localStorage.removeItem("userInfo"),t({type:H}),t({type:J}),t({type:b}),t({type:M})},K=(t,s,e,a,n)=>async o=>{try{o({type:G});const p={headers:{"Content-Type":"application/json"}},{data:E}=await r.post("/auth/users/",{first_name:t,last_name:s,email:e,password:a,re_password:n},p);o({type:Q,payload:E}),o({type:S,payload:E}),localStorage.setItem("userInfo",JSON.stringify(E))}catch(p){o({type:j,payload:p.response&&p.response.data.detail?p.response.data.detail:p.message})}},X=t=>async(s,e)=>{try{s({type:c});const{userLogin:{userInfo:a}}=e(),n={headers:{"Content-type":"application/json",Authorization:`Bearer ${a.access}`}},{data:o}=await r.get(`/api/users/${t}/`,n);s({type:y,payload:o})}catch(a){s({type:l,payload:a.response&&a.response.data.detail?a.response.data.detail:a.message})}},Z=t=>async(s,e)=>{try{s({type:d});const{userInfo:a}=e().userLogin,n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.access}`}},{data:o}=await r.put("/api/users/profile/update/",t,n);s({type:R,payload:o}),s({type:S,payload:o}),localStorage.setItem("userInfo",JSON.stringify(o))}catch(a){s({type:U,payload:a.response&&a.response.data.detail?a.response.data.detail:a.message})}},aa=()=>async(t,s)=>{try{t({type:T});const{userLogin:{userInfo:e}}=s(),a={headers:{Authorization:`Bearer ${e.access}`}},{data:n}=await r.get("/api/users/",a);t({type:I,payload:n})}catch(e){t({type:A,payload:e.response&&e.response.data.detail?e.response.data.detail:e.message})}},ea=t=>async(s,e)=>{try{s({type:$});const{userLogin:{userInfo:a}}=e(),n={headers:{Authorization:`Bearer ${a.access}`}},{data:o}=await r.delete(`/api/users/delete/${t}/`,n);s({type:h,payload:o})}catch(a){s({type:z,payload:a.response&&a.response.data.detail?a.response.data.detail:a.message})}},sa=t=>async(s,e)=>{try{s({type:g});const{userLogin:{userInfo:a}}=e(),n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.access}`}},{data:o}=await r.put(`/api/users/update/${t._id}/`,{first_name:t.first_name,last_name:t.last_name,email:t.email,isAdmin:t.isAdmin,username:t.username},n);s({type:C}),s({type:y,payload:o})}catch(a){s({type:u,payload:a.response&&a.response.data.detail?a.response.data.detail:a.message})}},ta=t=>async s=>{try{s({type:m});const e={headers:{"Content-type":"application/json"}},{data:a}=await r.post("/auth/users/reset_password/",{email:t},e);s({type:L,payload:a})}catch(e){s({type:f,payload:e.response&&e.response.data.detail?e.response.data.detail:e.message})}},oa=(t,s,e,a)=>async n=>{try{n({type:O});const o={headers:{"Content-type":"application/json"}},{data:p}=await r.post("/auth/users/reset_password_confirm/",{uid:t,token:s,new_password:e,re_new_password:a},o);n({type:D,payload:p})}catch(o){n({type:w,payload:o.response&&o.response.data.detail?o.response.data.detail:o.message})}},na=(t,s)=>async e=>{try{e({type:F});const a={headers:{"Content-type":"application/json"}},n=JSON.stringify({uid:t,token:s}),{data:o}=await r.post("/auth/users/activation/",n,a);e({type:P,payload:o})}catch(a){e({type:N,payload:a.response&&a.response.data.detail?a.response.data.detail:a.message})}},ra=t=>async s=>{try{s({type:B});const e={headers:{"Content-type":"application/json"}},{data:a}=await r.post("/auth/o/token/",{token:t},e);s({type:W,payload:a})}catch(e){s({type:v,payload:e.response&&e.response.data.detail?e.response.data.detail:e.message})}};export{na as a,oa as b,q as c,ra as d,sa as e,aa as f,X as g,ea as h,Y as l,ta as p,K as r,Z as u};
